*** /dspace/orig-1.2.2/dspace-1.2.1-source/src/org/dspace/app/webui/jsptag/ItemTag.java	Wed Dec 22 12:48:39 2004
--- /dspace/orig-1.2.2/dspace-1.2.2-source/src/org/dspace/app/webui/jsptag/ItemTag.java	Mon Mar 28 22:11:14 2005
***************
*** 1,9 ****
  /*
   * ItemTag.java
   *
!  * Version: $Revision: 1.24 $
   *
!  * Date: $Date: 2004/12/22 17:48:39 $
   *
   * Copyright (c) 2002, Hewlett-Packard Company and Massachusetts
   * Institute of Technology.  All rights reserved.
--- 1,9 ----
  /*
   * ItemTag.java
   *
!  * Version: $Revision: 1.27 $
   *
!  * Date: $Date: 2005/03/29 03:11:14 $
   *
   * Copyright (c) 2002, Hewlett-Packard Company and Massachusetts
   * Institute of Technology.  All rights reserved.
***************
*** 54,61 ****
  
  import java.io.IOException;
  
- import java.net.URLEncoder;
- 
  import java.util.Iterator;
  import java.util.LinkedList;
  import java.util.List;
--- 54,59 ----
***************
*** 69,75 ****
   * Tag for displaying an item
   * 
   * @author Robert Tansley
!  * @version $Revision: 1.24 $
   */
  public class ItemTag extends TagSupport
  {
--- 67,73 ----
   * Tag for displaying an item
   * 
   * @author Robert Tansley
!  * @version $Revision: 1.27 $
   */
  public class ItemTag extends TagSupport
  {
***************
*** 504,510 ****
                  out.print(request.getContextPath());
                  out.print("/html/");
                  out.print(handle + "/");
!                 out.print(URLEncoder.encode(primaryBitstream.getName(),
                          Constants.DEFAULT_ENCODING));
                  out.print("\">View/Open</A></td></tr>");
              }
--- 502,508 ----
                  out.print(request.getContextPath());
                  out.print("/html/");
                  out.print(handle + "/");
!                 out.print(UIUtil.encodeBitstreamName(primaryBitstream.getName(),
                          Constants.DEFAULT_ENCODING));
                  out.print("\">View/Open</A></td></tr>");
              }
***************
*** 557,563 ****
                              }
  
                              bsLink = bsLink
!                                     + URLEncoder.encode(
                                              bitstreams[k].getName(),
                                              Constants.DEFAULT_ENCODING) + "\">";
  
--- 555,561 ----
                              }
  
                              bsLink = bsLink
!                                     + UIUtil.encodeBitstreamName(
                                              bitstreams[k].getName(),
                                              Constants.DEFAULT_ENCODING) + "\">";
  
***************
*** 574,580 ****
                                              + "/retrieve/"
                                              + tb.getID()
                                              + "/"
!                                             + URLEncoder.encode(tb.getName(),
                                                      Constants.DEFAULT_ENCODING);
  
                                      out.print(bsLink);
--- 572,578 ----
                                              + "/retrieve/"
                                              + tb.getID()
                                              + "/"
!                                             + UIUtil.encodeBitstreamName(tb.getName(),
                                                      Constants.DEFAULT_ENCODING);
  
                                      out.print(bsLink);
