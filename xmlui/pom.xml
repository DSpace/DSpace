<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<artifactId>dspace-sedici</artifactId>
		<groupId>ar.edu.unlp.sedici</groupId>
		<version>1.8.0</version>
		<relativePath>..</relativePath>
	</parent>
	<artifactId>xmlui</artifactId>
	<packaging>war</packaging>
	<name>Dspace@SeDiCI XMLUI</name>
	<description>desc</description>
	<dependencies>

		<dependency>
			<groupId>org.dspace.modules</groupId>
			<artifactId>xmlui</artifactId>
			<version>${project.version}</version>
			<type>war</type>
		</dependency>
		
	   <!-- Wing framework -->
       <dependency>
            <groupId>org.dspace</groupId>
            <artifactId>dspace-xmlui-wing</artifactId>
        </dependency>
        <dependency>
            <groupId>org.dspace</groupId>
            <artifactId>dspace-xmlui-api</artifactId>
            <exclusions>
            	<exclusion>
            		<groupId>org.slf4j</groupId>
					<artifactId>slf4j-log4j12</artifactId>
            	</exclusion>
            	<exclusion>
            		<groupId>org.slf4j</groupId>
					<artifactId>slf4j-api</artifactId>
            	</exclusion>
            </exclusions>
        </dependency>
        
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <scope>provided</scope>
        </dependency>

		<dependency>
			<groupId>ar.edu.unlp.sedici</groupId>
			<artifactId>plugins</artifactId>
			<version>${project.version}</version>
			<type>jar</type>
		</dependency>
	</dependencies>

	<build>

		<!-- <filters> -->
		<!-- <filter>sedici.default.properties</filter> -->
		<!-- </filters> -->
		<resources>
			<resource>
				<directory>src/main/resources</directory>
				<filtering>true</filtering>
				<includes>
					<include>**</include>
				</includes>
			</resource>
		</resources>

		<plugins>
		
			<plugin>
				<groupId>org.mortbay.jetty</groupId>
				<artifactId>maven-jetty-plugin</artifactId>
				<version>6.1.26</version>
				<!-- <configuration> -->
				<!-- <contextPath>/dspace</contextPath> -->
				<!-- </configuration> -->
			</plugin>

			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>tomcat-maven-plugin</artifactId>
				<version>1.1</version>
				<!-- <configuration> -->
				<!-- <warFile>path/to/my/warFile.war</warFile> -->
				<!-- </configuration> -->
			</plugin>



			<plugin>
				<artifactId>maven-war-plugin</artifactId>
				<configuration>
					<archiveClasses>false</archiveClasses>
					<!-- <filters> -->
					<!-- <filter>config.prop</filter> -->
					<!-- </filters> -->
					<filtering>true</filtering>
					<filteringDeploymentDescriptors>true</filteringDeploymentDescriptors>
					<webXml>${project.build.directory}/${project.build.finalName}/webxml/WEB-INF/web.xml</webXml>

<!-- 					<webResources> -->
<!-- 						<resource> -->
<!-- 							<filtering>true</filtering> -->
<!-- 							<directory>${basedir}/src/main/webapp</directory> -->
<!-- 							<includes> -->
<!-- 								<include>**/*.xml</include> -->
<!-- 							</includes> -->
<!-- 							<excludes>	 -->
<!-- 								<exclude>**/messages*.xml</exclude> -->
<!-- 							</excludes> -->
<!-- 						</resource> -->
<!-- 					</webResources> -->

					<overlays>
						<!-- Se extrae web.xml para filtrar por separado -->
						<overlay>
							<groupId>org.dspace.modules</groupId>
							<artifactId>xmlui</artifactId>
							<includes>
								<include>WEB-INF/web.xml</include>
							</includes>
							<targetPath>webxml/</targetPath>
						</overlay>

						<!-- Se copia los archivos del proyecto para que tengan prioridad sobre los archivos de dspace:xmlui -->
						<overlay>
<!-- 							empty groupId/artifactId represents the current build -->
						</overlay>

						<!-- Se copian los archivos de dspace:xmlui (sin el web.xml) -->
						<overlay>
							<groupId>org.dspace.modules</groupId>
							<artifactId>xmlui</artifactId>
							<excludes>
								<exclude>WEB-INF/web.xml</exclude>
							</excludes>
						</overlay>
					</overlays>
				</configuration>

			</plugin>

		</plugins>
	</build>
</project>