<!-- The contents of this file are subject to the license and copyright detailed 
	in the LICENSE and NOTICE files at the root of the source tree and available 
	online at http://www.dspace.org/license/ -->
<assembly xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/assembly-1.1.0-SNAPSHOT.xsd">
	<id>bin</id>
	<formats>
		<format>dir</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>

	<fileSets>
		<!-- Copio los archivos de conf redefinidos permaneceran -->
		<fileSet>
			<directory>overwritten-files</directory>
			<outputDirectory>.</outputDirectory>
			<includes>
				<include>config/**</include>
				<include>etc/**</include>
				<include>solr/**</include>
				<include>config/dspace.cfg</include>
			</includes>
			<excludes>
				<exclude>config/GeoLiteCity.dat</exclude>
			</excludes>
			<filtered>true</filtered>
		</fileSet>
		<fileSet>
			<directory>overwritten-files</directory>
			<outputDirectory>.</outputDirectory>
			<includes>
				<include>config/GeoLiteCity.dat</include>
			</includes>
			<filtered>false</filtered>
		</fileSet>

		<fileSet>
			<directory>dspace-tag-files/src/main/config</directory>
			<outputDirectory>.</outputDirectory>
			<includes>
				<include>build.xml</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>dspace-tag-files</directory>
			<outputDirectory>.</outputDirectory>
			<includes>
				<include>bin/**</include>
				<include>config/**</include>
				<include>docs/**</include>
				<include>etc/**</include>
				<include>solr/**</include>
				<include>build.xml</include>
				<include>LICENSE*</include>
				<include>CHANGES</include>
				<include>KNOWN_BUGS</include>
				<include>README</include>
			</includes>
			<excludes>
				<exclude>src</exclude>
				<exclude>config/dspace.cfg</exclude>
				<exclude>config/modules/**</exclude>
			</excludes>
		</fileSet>
		<fileSet>
			<directory>dspace-tag-files</directory>
			<outputDirectory>.</outputDirectory>
			<includes>
				<include>config/modules/**</include>
				<!-- <include>config/dspace.cfg</include> -->
			</includes>
			<filtered>true</filtered>
		</fileSet>

	</fileSets>

	<dependencySets>
		<!-- copia todos los jars definidos como dependencias, que fueron descargadas por maven -->
		<dependencySet>
			<excludes>
				<exclude>*:war:*</exclude>
			</excludes>
			<outputDirectory>lib</outputDirectory>
			<useProjectArtifact>false</useProjectArtifact>
		</dependencySet>
	</dependencySets>

	<moduleSets>
		<!-- copia de webapps definidas como modulos dentro distribution -->
		<moduleSet>
			<useAllReactorProjects>false</useAllReactorProjects>
			<includes>
				<include>*:war:*</include>
			</includes>
			<binaries>
				<includeDependencies>false</includeDependencies>
				<outputDirectory>webapps/${module.artifactId}</outputDirectory>
				<unpack>true</unpack>
			</binaries>
		</moduleSet>
	
		<!-- copia de los jars definidos como modulos e incluidos en el Reactor -->
		<moduleSet>
			<useAllReactorProjects>true</useAllReactorProjects>
			<includes>
				<include>*:jar:*</include>
			</includes>
			<binaries>
				<includeDependencies>false</includeDependencies>
				<outputDirectory>lib</outputDirectory>
				<unpack>false</unpack>
			</binaries>
		</moduleSet>
	</moduleSets>

</assembly>
