<?xml version="1.0"?>

<project name="DSpace" default="compile" basedir="..">

  <property name="build.compiler" value="jikes"/>
  <property environment="env"/>
  <property name="my.java.home"     value="/usr/j2se"/>


  <!-- ============================================================= -->
  <!-- Build parameters that are likely to need tweaking             -->
  <!-- ============================================================= -->
    
  <!-- Default configuration to use.  This may be overridden. -->
  <property name="config" value="${basedir}/config/dspace.cfg" />

  <!-- Give user a chance to override without editing this file 
       (and without typing -D each time s/he compiles it) -->
  <property file="${user.home}/.dspace.properties" />

  <!-- Load the configuration -->
  <property file="${config}" />


  <!-- We will include the environment CLASSPATH -->
  <path id="build.class.path">
    <pathelement path="${basedir}/src"/>
    <pathelement path="${basedir}/src/xml-apis.jar"/>
    <pathelement path="${my.java.home}/jre/lib/rt.jar"/>
    <pathelement path="${env.CLASSPATH}"/>
    <pathelement path="${basedir}/source/build/classes"/>
    <fileset dir="${basedir}/lib">
      <include name="**/*.jar"/>
    </fileset>
  </path>

  
  <target name="compile"
          description="Compile the source code">
    <mkdir dir="${basedir}/src"/>
    <javac srcdir="${basedir}/src"
           destdir="${basedir}/src"
           debug="on">
      <include name="**/*.java"/>
      <classpath refid="build.class.path"/>
    </javac>
  </target>

  <target name="run" depends="compile"
          description="Run the test">
      <java classname="HandleTest">
        <classpath refid="build.class.path"/>
      </java>
  </target>     
  
</project>
