<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd"
       default-autowire-candidates="*Service,*DAO,javax.sql.DataSource">

    <context:annotation-config/>
    <!-- allows us to use spring annotations in beans -->

    <util:list id="openairePublicationsMetadataFieldMap"
              value-type="org.dspace.importer.external.metadatamapping.contributor.MetadataContributor">
        <description>Defines which metadatum is mapped on which metadatum.</description>
        <ref bean="openaireTitleContrib"/>
        <ref bean="openaireSummaryContrib"/>
        <ref bean="openairePublishedContrib"/>
        <ref bean="openaireDoiContrib"/>
        <ref bean="openaireJournalContrib"/>
        <ref bean="openaireCategoryTermContrib"/>
        <ref bean="openaireAuthorContrib"/>
        <ref bean="openaireOtherContrib"/>
    </util:list>


    <bean id="openaireOtherContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathMetadatumContributor">
        <property name="field" ref="dc.identifier.other"/>
        <property name="query" value="descendant::dri:objIdentifier"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>


    <bean id="openaireTitleContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathMetadatumContributor">
        <property name="field" ref="dc.title"/>
        <property name="query" value="descendant::oaf:result/title"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>

    <bean id="openaireSummaryContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathMetadatumContributor">
        <property name="field" ref="dc.description.abstract"/>
        <property name="query" value="descendant::oaf:result/description"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>

    <bean id="openairePublishedContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathDateFormatMetadataContributor">
        <property name="dateFormatFrom" value="yyyy-MM-dd'T'HH:mm:ss'Z'"/>
        <property name="dateFormatTo" value="yyyy-MM-dd"></property>
        <property name="field" ref="dc.date.issued"/>
        <property name="query" value="descendant::oaf:result/relevantdate"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>

    <bean id="openaireDoiContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathMetadatumContributor">
        <property name="field" ref="dc.identifier"/>
        <property name="query" value="descendant::oaf:result/pid"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>

    <bean id="openaireJournalContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathMetadatumContributor">
        <property name="field" ref="dc.source"/>
        <property name="query" value="descendant::oaf:result/collectedfrom/@name"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>


    <bean id="openaireCategoryTermContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathMetadatumContributor">
        <property name="field" ref="dc.subject"/>
        <property name="query" value="descendant::oaf:result/subject"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>

    <bean id="openaireAuthorContrib" class="org.dspace.importer.external.metadatamapping.contributor.SimpleXpathMetadatumContributor">
        <property name="field" ref="dc.contributor.author"/>
        <property name="query" value="descendant::oaf:result/creator"/>
        <property name="prefixToNamespaceMapping" ref="openairePrefixToNamespaceMapping"/>
    </bean>

    <util:map id="openairePrefixToNamespaceMapping" map-class="java.util.HashMap"
        key-type="java.lang.String" value-type="java.lang.String">
        <entry key="http://www.driver-repository.eu/namespace/dri" value="dri" />
        <entry key="http://namespace.openaire.eu/oaf" value="oaf" />
        <entry key="http://www.w3.org/2001/XMLSchema-instance" value="xsi" />
    </util:map>
    
   

    <bean class="java.lang.Integer" id="maxRetry">
        <constructor-arg value="3"/>
    </bean>

</beans>
